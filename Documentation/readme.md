# Alma Integration System

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É Bitrix24 CRM –∏ Alma Property Management System –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, –∫–ª–∏–µ–Ω—Ç–∞—Ö –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π PHP-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–µ–∂–¥—É:
- **Bitrix24 CRM** - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
- **Alma PMS** - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç:
- üè† **–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã** (–∫–≤–∞—Ä—Ç–∏—Ä—ã, —Å—Ç—É–¥–∏–∏)
- üë• **–ö–ª–∏–µ–Ω—Ç–æ–≤/–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤**
- üìÑ **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É**
- üè¢ **–ó–¥–∞–Ω–∏—è**

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –≤ Alma –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ Bitrix24
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (–∫–≤–∞—Ä—Ç–∏—Ä—ã, —Å—Ç—É–¥–∏–∏)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–ø–ª–æ—â–∞–¥—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç, —ç—Ç–∞–∂, –∞–¥—Ä–µ—Å)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–∞—Å–ø–æ—Ä—Ç, ID)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è email –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–∞ –∞—Ä–µ–Ω–¥—É
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (Airbnb, –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –¥–∞—Ç
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∞–Ω–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îú‚îÄ‚îÄ index.php              # –ì–ª–∞–≤–Ω—ã–π webhook-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îú‚îÄ‚îÄ appart.php             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ tenant.php             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ tenatContract.php      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
‚îú‚îÄ‚îÄ Config.php             # –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ Bitrix24Rest.php       # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è Bitrix24
‚îú‚îÄ‚îÄ ReAlma.php             # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è Alma
‚îú‚îÄ‚îÄ Logger.php             # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ Dumper.php             # –£—Ç–∏–ª–∏—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **Webhook –æ—Ç Bitrix24** ‚Üí `index.php`
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–∏** (–∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç/–∫–ª–∏–µ–Ω—Ç/–∫–æ–Ω—Ç—Ä–∞–∫—Ç)
3. **–í—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞**
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Alma API**
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP 7.4+
- cURL extension
- –î–æ—Å—Ç—É–ø –∫ Bitrix24 webhook
- API –∫–ª—é—á Alma

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd alma
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
cp config.env.example config.env
```

3. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.env`:**
```env
# Alma API Configuration
ALMA_API_KEY=your_alma_api_key_here
ALMA_API_URL=https://your-alma-domain.com/external_api/
ALMA_REALTY_API_URL=https://your-alma-domain.com/external_api/realty/

# Bitrix24 Configuration
WEBHOOK_URL=https://your-bitrix-domain.bitrix24.eu/rest/YOUR_USER_ID/YOUR_WEBHOOK_CODE/

# Project Configuration
PROJECT_ID=207

# Application URLs
APP_BASE_URL=https://your-domain.com/alma/
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –≤ Bitrix24:**
   - URL: `https://your-domain.com/alma/index.php`
   - –°–æ–±—ã—Ç–∏—è: `ONCRMITEMUPDATE`, `ONCRMCONTACTUPDATE`

## üìä –¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π

### –ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã (Entity Type ID: 144)
- **–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ Bitrix24
- **–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π:**
  - –¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (52=studio, 54-64=apartment)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∞–ª–µ–Ω (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∏–ø—É)
  - –ü–ª–æ—â–∞–¥—å, —ç—Ç–∞–∂, –∞–¥—Ä–µ—Å
  - –°—Ç–∞–Ω—Ü–∏—è –º–µ—Ç—Ä–æ (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ Dubai Metro)
  - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–∞–Ω–Ω—ã–µ, –ø–∞—Ä–∫–æ–≤–∫–∞, –∫–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞

### –ö–ª–∏–µ–Ω—Ç—ã (Entity Type ID: 3)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ç–∏–ø–∞ TENANT/CLIENT
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** –∏–º—è, —Ñ–∞–º–∏–ª–∏—è
- **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è email** –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (–ø–∞—Å–ø–æ—Ä—Ç, ID)

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã (Entity Type ID: 183)
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** –Ω–∞ –∞—Ä–µ–Ω–¥—É
- **–¢–∏–ø—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:**
  - 882: Airbnb
  - 884: Short term (1-3 months)
  - 886: Long-term (3+ months)
  - 1304: Booking
  - 1306: Short contract (up to 1 month)

## üîß API Endpoints

### Alma API
- `POST /external_api/realty/units/` - –°–æ–∑–¥–∞–Ω–∏–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
- `PATCH /external_api/realty/units/{id}/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
- `POST /external_api/users/clients/` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
- `POST /external_api/realty/contracts/tenant_contracts/` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

### Bitrix24 API
- `crm.item.get` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–∏
- `crm.contact.get` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞

## üè¢ Alma Web Interface

### –ò–µ—Ä–∞—Ä—Ö–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Alma
Alma –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ (–æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –∫ –Ω–∏–∂–Ω–µ–º—É):

1. **–ü—Ä–æ–µ–∫—Ç—ã** - https://colife.alma-app.com/projects/{id}
   - –ü—Ä–∏–º–µ—Ä: [–ü—Ä–æ–µ–∫—Ç Dubai](https://colife.alma-app.com/projects/207)

2. **–ó–¥–∞–Ω–∏—è** - https://colife.alma-app.com/buildings/{id}
   - –ü—Ä–∏–º–µ—Ä: [–ó–¥–∞–Ω–∏–µ 357](https://colife.alma-app.com/buildings/357)

3. **–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã/–Æ–Ω–∏—Ç—ã** - https://colife.alma-app.com/units/{id}
   - –ü—Ä–∏–º–µ—Ä: [–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç 2613](https://colife.alma-app.com/units/2613)

4. **–ö–æ–º–Ω–∞—Ç—ã** - https://colife.alma-app.com/rooms/{id}
   - –ü—Ä–∏–º–µ—Ä: [–ö–æ–º–Ω–∞—Ç–∞ 5535](https://colife.alma-app.com/rooms/5535)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Å—ã–ª–æ–∫
- **–ü—Ä–æ–µ–∫—Ç—ã**: `/projects/{project_id}`
- **–ó–¥–∞–Ω–∏—è**: `/buildings/{building_id}` 
- **–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã**: `/units/{unit_id}`
- **–ö–æ–º–Ω–∞—Ç—ã**: `/rooms/{room_id}`

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò–µ—Ä–∞—Ä—Ö–∏—è –∏–¥–µ—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑: –ü—Ä–æ–µ–∫—Ç ‚Üí –ó–¥–∞–Ω–∏–µ ‚Üí –ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç ‚Üí –ö–æ–º–Ω–∞—Ç–∞

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

**–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- üîç **–ü–æ–∏—Å–∫ –ø–æ API** - –ø–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞–¥—Ä–µ—Å—É –∏–ª–∏ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º —á–µ—Ä–µ–∑ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- üóëÔ∏è **–£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤** - —É–¥–∞–ª–µ–Ω–∏–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤, —é–Ω–∏—Ç–æ–≤, –∑–¥–∞–Ω–∏–π –∏–ª–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
- üìã **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Alma –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –î–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GET –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–ø–∏—Å–∫–∞–º –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
- –î–ª—è "—É–¥–∞–ª–µ–Ω–∏—è" –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ PATCH endpoints

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

- **–§–∞–π–ª:** `alma_integration.log`
- **–£—Ä–æ–≤–Ω–∏:** DEBUG, INFO, WARNING, ERROR
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ:** API –∑–∞–ø—Ä–æ—Å—ã, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π, –æ—à–∏–±–∫–∏

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:
```json
{
  "timestamp": "2024-01-15 10:30:45",
  "level": "INFO",
  "message": "Apartment successfully processed",
  "entity_type": "apartment",
  "entity_id": "12345",
  "context": {
    "method": "POST",
    "alma_id": 67890
  }
}
```

## üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

### –£—Ç–∏–ª–∏—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
- **Dumper::dump()** - –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **Logger::debug()** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **API –ª–æ–≥–∏** - –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ webhook URL
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –∏ –¥–æ—Å—Ç—É–ø—ã
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Dumper –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **API –∫–ª—é—á–∏** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **Webhook –≤–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Bitrix24
- **SSL/TLS** –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –∞—É–¥–∏—Ç–∞

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **Retry –ª–æ–≥–∏–∫–∞** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤
- **Graceful degradation** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º

### –ê–ª–µ—Ä—Ç—ã
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ API
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `alma_integration.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö API
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Alma API

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏.

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024  
**–ê–≤—Ç–æ—Ä:** Development Team